<?xml version="1.0" encoding="UTF-8"?>
<archimate:model xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:archimate="http://www.archimatetool.com/archimate" name="buhService" id="_7RWQ8CqVEey-A40W5C_9dw" version="5.0.0">
  <folder name="Strategy" id="id-464618889603422e9d5249f91b1b5255" type="strategy"/>
  <folder name="Business" id="id-688dffc2b4a34dd8a0e9c4583428896b" type="business">
    <element xsi:type="archimate:BusinessService" name="Оплата клиентом товара &quot;Магазина&quot;Сумма: 100 тенгеПлатформа: СРExternal ID Transaction: CP-ID-1" id="_VYo5oA1oEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:BusinessService" name="Оплата клиентом товара &quot;The Dragstore&quot;Сумма: 100 USDПлатформа: STRIPEExternal ID Transaction: ST-ID-1Платеж делится на части:94$ уходит магазину, 6; на аккаунт брискли и с этих 6; еще коммисия сервиса" id="_oEVrUA2KEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:BusinessService" name="Оплата клиентом товара &quot;Магазина&quot;Сумма: 100 тенгеПлатформа: СРExternal ID Transaction: CP-ID-1" id="_3u9KEA2KEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:BusinessService" name="Перевод средст с аккаунта страйпа на счет брисклиСумма: 100 USDПлатформа: STRIPEExternal ID Transaction: ST-ID-2Возможна комиссия" id="_lrGd4A2cEDqz_MblWIxtOg"/>
  </folder>
  <folder name="Application" id="id-ba8684858a1c4cb29151f29e83afa884" type="application">
    <element xsi:type="archimate:DataObject" name="Кредит Магазин- Дебит &quot;CloudPayments&quot;Сумма - 100Тип - Оплата товара клиентомВалюта - ТенгеExID CP-ID-1" id="_v81U0AzKEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит &quot;CloudPayments&quot;Дебит МагазинCумма - 100Тип - Отправка средств мерчуВалюта ТенгеExID CP-ID-1" id="_NIyc8A1gEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит &quot;Магазин&quot;Дебит &quot;брискли&quot;Сумма 9Тип - Коммисия брисклиВалюта тенгеExID CP-ID-1" id="_29vPsA1iEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Event" id="_AF_P0A1yEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Event" id="_uoWpkA2YEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: StripeДебит: The DragstoreСумма: 94$Тип: Оплата товара клиентомВалюта: USDExID: ST-ID-1" id="_BeSNwA2ZEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: StripeДебит: БрисклиСумма: 6$Тип: Коммисия брисклиВалюта: USDExID: ST-ID-1" id="_BAMuIA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Кредит: БрисклиДебит: StripeСумма: 5.6$Тип: Коммисия страйпа за платежВалюта: USDExID: ST-ID-1" id="_UV_eIA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Кредит: БрисклиДебит: StripeСумма: 5.6$Тип: Коммисия страйпа за платежВалюта: USDExID: ST-ID-1" id="_WZSyoA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: БрисклиДебит: StripeСумма: 5.6$Тип: Коммисия страйпа за платежВалюта: USDExID: ST-ID-1" id="_aPzKIA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: StripeДебит: БрисклиСумма: 5.6$Тип: Коммисия страйпа за платежВалюта: USDExID: ST-ID-1" id="_h3DPYA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Event" id="_iu4H4A2dEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: BrisklyДебит: StripeСумма: 99$Тип: Вывод средст на счет брисклиВалюта: USDExID: ST-ID-2" id="_riJUUA2dEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:DataObject" name="Кредит: StripeДебит: BrisklyСумма: 1$Тип: Коммисия за вывод средствВалюта: USDExID: ST-ID-2" id="_BZTN0A2eEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ApplicationEvent" name="Pay Event" id="_HwrRQA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationProcess" name="Process" id="_f1PdgA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationService" name="Service PCI DSS" id="_0-ngcA46EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationService" name="Payment Service" id="_4J238A47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationService" name="Subscriber Service" id="_Kcqg8A48EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationProcess" name="Process" id="_yTE1UA48EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationFunction" name="Сохранение информации о полученом событии" id="_8bRNUA48EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationFunction" name="Проверка на дублирование события" id="_RiKukA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationProcess" name="Проверка события. Оно не должно быть обработаным или обрабытваться уже другим процессом" id="_ZfWnkA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationProcess" name="Сбор необходимой информации на основе данных события" id="_n3nGkA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationProcess" name="Формирование записей в сервис" id="_5Gd_QA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:DataObject" name="Кредит-Дебит" id="_7JKPwA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationService" name="EventDispatcher" id="_OPlHAA4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationEvent" name="Confirmation Event" id="_S6A10A4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationService" name="Сервис контроля доставки и обработки события" id="_ePv_AA4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:DataObject" name="Кредит CloudPayments - Дебит &quot;Брискли&quot;Сумма - 1Тип - Комиссия ср за транзакциюВалюта - РубльExID CP-ID-1" id="_TA0_oA_XEDq7DoulV38TMA"/>
    <element xsi:type="archimate:ApplicationCollaboration" name="Event Bus RabbitMQ" id="_oFJ8wCXKEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationComponent" name="Events Pay" id="_qI5WICXKEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationComponent" name="Subscriber" id="_Wzk1UCXMEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationCollaboration" name="Queue (допустимо логальная очередь в рамках инстанса приложения)" id="_ltJcMCXNEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" id="_rfGMsCXNEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationService" name="Event Pay Worker" id="_tOaOMCXNEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Проверка на индепотентность" id="_BjgCkCXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationService" name="Сервис обеспечения индепотентности" id="_GcYdECXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Анализ события и передача в очередь обработки согласно провайдеру платежа" id="_jWs3UCXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationCollaboration" name="Queue Provider Workers" id="_Ha3hwCXTEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationService" name="Provider worker" id="_891FsCXTEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationService" name="EventDispatcher" id="_s7ZucCXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Проверка что есть блокировка по данному событию" id="_BiQ6MCXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Сбор данных по всем плательщикам указанных в событии" id="_NV2dACXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Формирование сущности Transactionhttps://app.genmymodel.com/api/projects/_dTI38EBmEeyo8oS76GR6Gg/diagrams/_dTJfAkBmEeyo8oS76GR6Gg/svg" id="_U1Rb8CXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="! In TransactionПоследовательное сохранение всех проводок и прочей информации о транзакции" id="_cF6YACXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Снятие блокировки на обработку события" id="_iJ7I4CXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:ApplicationFunction" name="Публикация события о добавлении новой транзакции в сервис" id="_wCmv8CXUEDqeZsBuoz9wnQ"/>
  </folder>
  <folder name="Technology &amp; Physical" id="id-df55925d43a84c1f83c28eb7b74e6975" type="technology">
    <element xsi:type="archimate:TechnologyService" name="Pub/Sub Service" id="_sYJkcA47EDq7DoulV38TMA"/>
  </folder>
  <folder name="Motivation" id="id-7d391ad59c494b979d8790724110b5bd" type="motivation"/>
  <folder name="Implementation &amp; Migration" id="id-8f72b22a8c514dcd8654369e61b51aa8" type="implementation_migration"/>
  <folder name="Other" id="id-3c3bd1b82248434880706f8c8c952c18" type="other">
    <element xsi:type="archimate:Grouping" name="External Service" id="_z3C-8A47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:Grouping" name="Buh Service" id="_9AB8sA47EDq7DoulV38TMA"/>
  </folder>
  <folder name="Relations" id="id-2cd5dcc49f3e4215b635ebde8ec70392" type="relations">
    <element xsi:type="archimate:TriggeringRelationship" id="_6Y3tMA47EDq7DoulV38TMA" source="_4J238A47EDq7DoulV38TMA" target="_HwrRQA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_gHs0kA49EDq7DoulV38TMA" source="_Kcqg8A48EDq7DoulV38TMA" target="_ZfWnkA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_1ILkwA49EDq7DoulV38TMA" source="_ZfWnkA49EDq7DoulV38TMA" target="_n3nGkA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_CQHEUA4-EDq7DoulV38TMA" source="_n3nGkA49EDq7DoulV38TMA" target="_5Gd_QA49EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_SadzEA4-EDq7DoulV38TMA" source="_5Gd_QA49EDq7DoulV38TMA" target="_OPlHAA4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_VYbZAA4-EDq7DoulV38TMA" source="_OPlHAA4-EDq7DoulV38TMA" target="_sYJkcA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_Wa4UgA4-EDq7DoulV38TMA" source="_OPlHAA4-EDq7DoulV38TMA" target="_S6A10A4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_1i9aICXUEDqeZsBuoz9wnQ" source="_s7ZucCXUEDqeZsBuoz9wnQ" target="_oFJ8wCXKEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_u6nt0A1iEDqz_MblWIxtOg" source="_v81U0AzKEDqz_MblWIxtOg" target="_NIyc8A1gEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_lfBrMA1kEDqz_MblWIxtOg" source="_v81U0AzKEDqz_MblWIxtOg" target="_29vPsA1iEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:ServingRelationship" id="_IJDHUA1yEDqz_MblWIxtOg" source="_VYo5oA1oEDqz_MblWIxtOg" target="_AF_P0A1yEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:AssociationRelationship" id="_rs5vcA10EDqz_MblWIxtOg" source="_AF_P0A1yEDqz_MblWIxtOg" target="_v81U0AzKEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_7qDlUA2YEDqz_MblWIxtOg" source="_oEVrUA2KEDqz_MblWIxtOg" target="_uoWpkA2YEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_dhiAoA2aEDqz_MblWIxtOg" source="_BAMuIA2aEDqz_MblWIxtOg" target="_aPzKIA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:AssociationRelationship" id="_eTbXoA2aEDqz_MblWIxtOg" source="_uoWpkA2YEDqz_MblWIxtOg" target="_BeSNwA2ZEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:AssociationRelationship" id="_e2oyYA2aEDqz_MblWIxtOg" source="_uoWpkA2YEDqz_MblWIxtOg" target="_BAMuIA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_lFKxMA2aEDqz_MblWIxtOg" source="_aPzKIA2aEDqz_MblWIxtOg" target="_h3DPYA2aEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:AssociationRelationship" id="_LIM8EA2eEDqz_MblWIxtOg" source="_iu4H4A2dEDqz_MblWIxtOg" target="_riJUUA2dEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_Lu-BIA2eEDqz_MblWIxtOg" source="_riJUUA2dEDqz_MblWIxtOg" target="_BZTN0A2eEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_oDIsAA47EDq7DoulV38TMA" source="_0-ngcA46EDq7DoulV38TMA" target="_HwrRQA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_TLtUsA48EDq7DoulV38TMA" source="_HwrRQA47EDq7DoulV38TMA" target="_Kcqg8A48EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_mHld8A4-EDq7DoulV38TMA" source="_S6A10A4-EDq7DoulV38TMA" target="_ePv_AA4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_o-ic8A4-EDq7DoulV38TMA" source="_z3C-8A47EDq7DoulV38TMA" target="_ePv_AA4-EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_pbFPAA4-EDq7DoulV38TMA" source="_ePv_AA4-EDq7DoulV38TMA" target="_z3C-8A47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_hzmOUA5AEDq7DoulV38TMA" source="_lrGd4A2cEDqz_MblWIxtOg" target="_iu4H4A2dEDqz_MblWIxtOg"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_dvvwkA7_EDq7DoulV38TMA" source="_z3C-8A47EDq7DoulV38TMA" target="_HwrRQA47EDq7DoulV38TMA"/>
    <element xsi:type="archimate:SpecializationRelationship" id="_bto-wA_XEDq7DoulV38TMA" source="_v81U0AzKEDqz_MblWIxtOg" target="_TA0_oA_XEDq7DoulV38TMA"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_GehdACXNEDqeZsBuoz9wnQ" source="_oFJ8wCXKEDqeZsBuoz9wnQ" target="_Wzk1UCXMEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_g0gAUCXPEDqeZsBuoz9wnQ" source="_BjgCkCXPEDqeZsBuoz9wnQ" target="_GcYdECXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_oB2X0CXPEDqeZsBuoz9wnQ" source="_BjgCkCXPEDqeZsBuoz9wnQ" target="_jWs3UCXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_yzKlUCXPEDqeZsBuoz9wnQ" source="_GcYdECXPEDqeZsBuoz9wnQ" target="_BjgCkCXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_ttu_wCXTEDqeZsBuoz9wnQ" source="_jWs3UCXPEDqeZsBuoz9wnQ" target="_Ha3hwCXTEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_FTRtsCXUEDqeZsBuoz9wnQ" source="_BiQ6MCXUEDqeZsBuoz9wnQ" target="_GcYdECXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_GHTysCXUEDqeZsBuoz9wnQ" source="_GcYdECXPEDqeZsBuoz9wnQ" target="_BiQ6MCXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_Rpy-cCXUEDqeZsBuoz9wnQ" source="_BiQ6MCXUEDqeZsBuoz9wnQ" target="_NV2dACXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_ZQ22cCXUEDqeZsBuoz9wnQ" source="_NV2dACXUEDqeZsBuoz9wnQ" target="_U1Rb8CXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_lUuQ8CXUEDqeZsBuoz9wnQ" source="_cF6YACXUEDqeZsBuoz9wnQ" target="_iJ7I4CXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_lvao4CXUEDqeZsBuoz9wnQ" source="_U1Rb8CXUEDqeZsBuoz9wnQ" target="_891FsCXTEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_m1OaYCXUEDqeZsBuoz9wnQ" source="_U1Rb8CXUEDqeZsBuoz9wnQ" target="_cF6YACXUEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_nfkX4CXUEDqeZsBuoz9wnQ" source="_iJ7I4CXUEDqeZsBuoz9wnQ" target="_GcYdECXPEDqeZsBuoz9wnQ"/>
    <element xsi:type="archimate:TriggeringRelationship" id="_vNY_MCXUEDqeZsBuoz9wnQ" source="_iJ7I4CXUEDqeZsBuoz9wnQ" target="_s7ZucCXUEDqeZsBuoz9wnQ"/>
  </folder>
  <folder name="Views" id="id-a77fac352a1644eb95ca63dd52da5c83" type="diagrams">
    <element xsi:type="archimate:ArchimateDiagramModel" name="Описание событий" id="_7RWQ8yqVEey-A40W5C_9dw">
      <child xsi:type="archimate:Group" id="_8ht14AzDEDqz_MblWIxtOg" name="Запись в сервисе учета" textAlignment="1">
        <bounds x="21" y="31" width="570" height="310"/>
        <child xsi:type="archimate:Note" id="__2bH4AzDEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="15" y="36" width="540" height="260"/>
          <content>- Дебит -- Фирма/или клиент (напр. Брискли)- Кредит -- Фирма/или клиент (напр. ИП Кайыркенова )- Сумма- Валюта- Тип (комисия брискли/сервиса, оплата товара клиентом, и др)- Описание- Дата платежа- Платформа (cp, tinkoff, stripe, 1c)- Files- External ID Transaction- Internal ID Transaction- Дата создания- Additional data (чеки, клиент, маска карты/зорро и пр.)</content>
        </child>
      </child>
      <child xsi:type="archimate:Group" id="_haGrMAzKEDqz_MblWIxtOg" name="Сформированные записи" textAlignment="1">
        <bounds x="21" y="813" width="420" height="360"/>
        <child xsi:type="archimate:DiagramObject" id="_v8-ewAzKEDqz_MblWIxtOg" targetConnections="_rthagA10EDqz_MblWIxtOg" archimateElement="_v81U0AzKEDqz_MblWIxtOg">
          <bounds x="6" y="34" width="190" height="90"/>
          <sourceConnection xsi:type="archimate:Connection" id="_u7BWcA1iEDqz_MblWIxtOg" source="_v8-ewAzKEDqz_MblWIxtOg" target="_NJIbMA1gEDqz_MblWIxtOg" archimateRelationship="_u6nt0A1iEDqz_MblWIxtOg">
            <bendpoint startX="116" endX="-106"/>
            <bendpoint startX="116" endX="-106"/>
          </sourceConnection>
          <sourceConnection xsi:type="archimate:Connection" id="_lfMDQA1kEDqz_MblWIxtOg" source="_v8-ewAzKEDqz_MblWIxtOg" target="_298EAA1iEDqz_MblWIxtOg" archimateRelationship="_lfBrMA1kEDqz_MblWIxtOg">
            <bendpoint startX="116" startY="-227" endX="-106" endY="-331"/>
            <bendpoint startX="116" startY="104" endX="-106"/>
          </sourceConnection>
          <sourceConnection xsi:type="archimate:Connection" id="_btvscA_XEDq7DoulV38TMA" source="_v8-ewAzKEDqz_MblWIxtOg" target="_TBDCEA_XEDq7DoulV38TMA" archimateRelationship="_bto-wA_XEDq7DoulV38TMA">
            <bendpoint startX="-20" startY="79" endY="-88"/>
            <bendpoint startX="-20" startY="78" endY="-89"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_NJIbMA1gEDqz_MblWIxtOg" targetConnections="_u7BWcA1iEDqz_MblWIxtOg" archimateElement="_NIyc8A1gEDqz_MblWIxtOg">
          <bounds x="238" y="34" width="170" height="90"/>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_298EAA1iEDqz_MblWIxtOg" targetConnections="_lfMDQA1kEDqz_MblWIxtOg" archimateElement="_29vPsA1iEDqz_MblWIxtOg">
          <bounds x="238" y="138" width="170" height="90"/>
        </child>
        <child xsi:type="archimate:Note" id="_0jlIIA1nEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="170" y="237" width="230" height="100"/>
          <content>По итогу:Баланс между ср и магазином равен 0.У магазина перед брискли пораждается задолженость в виде коммисии брискли.</content>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_TBDCEA_XEDq7DoulV38TMA" targetConnections="_btvscA_XEDq7DoulV38TMA" archimateElement="_TA0_oA_XEDq7DoulV38TMA">
          <bounds x="6" y="191" width="150" height="110"/>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_VY4KMA1oEDqz_MblWIxtOg" archimateElement="_VYo5oA1oEDqz_MblWIxtOg">
        <bounds x="36" y="360" width="390" height="80"/>
        <sourceConnection xsi:type="archimate:Connection" id="_IJPUkA1yEDqz_MblWIxtOg" source="_VY4KMA1oEDqz_MblWIxtOg" target="_AGiCYA1yEDqz_MblWIxtOg" archimateRelationship="_IJDHUA1yEDqz_MblWIxtOg">
          <bendpoint startX="43" startY="91" endY="-70"/>
          <bendpoint startX="43" startY="90" endY="-71"/>
        </sourceConnection>
      </child>
      <child xsi:type="archimate:Group" id="_T5wcoA1vEDqz_MblWIxtOg" name="События" textAlignment="1">
        <bounds x="21" y="486" width="420" height="300"/>
        <child xsi:type="archimate:Note" id="_vjo30A1xEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="19" y="44" width="360" height="210"/>
          <content>Status: SuccessOperation: Pay from ClientPlatform: CloudPaymentsAmount: 100Currency: KZInternalId: InID-CP-1InvoiceId: inv_1Recipiens: - ID: ID_OF_MERCHANT (TOKEN ТЕРМИНАЛА) - Amount: 100- Fee: 0- TransactionId: CP-ID-1</content>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_AGiCYA1yEDqz_MblWIxtOg" targetConnections="_IJPUkA1yEDqz_MblWIxtOg" archimateElement="_AF_P0A1yEDqz_MblWIxtOg">
          <bounds x="213" y="55" width="80" height="40"/>
          <sourceConnection xsi:type="archimate:Connection" id="_rthagA10EDqz_MblWIxtOg" source="_AGiCYA1yEDqz_MblWIxtOg" target="_v8-ewAzKEDqz_MblWIxtOg" archimateRelationship="_rs5vcA10EDqz_MblWIxtOg">
            <bendpoint startX="-48" endX="104" endY="-331"/>
            <bendpoint startX="-49" startY="331" endX="103"/>
          </sourceConnection>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_oEWSYQ2KEDqz_MblWIxtOg" archimateElement="_oEVrUA2KEDqz_MblWIxtOg">
        <bounds x="507" y="360" width="390" height="110"/>
        <sourceConnection xsi:type="archimate:Connection" id="_7qS14A2YEDqz_MblWIxtOg" source="_oEWSYQ2KEDqz_MblWIxtOg" target="_uot18A2YEDqz_MblWIxtOg" archimateRelationship="_7qDlUA2YEDqz_MblWIxtOg">
          <bendpoint startX="19" startY="86" endY="-50"/>
          <bendpoint startX="19" startY="85" endY="-51"/>
        </sourceConnection>
      </child>
      <child xsi:type="archimate:Group" id="_4qMDQA2KEDqz_MblWIxtOg" name="События" textAlignment="1">
        <bounds x="512" y="486" width="438" height="300"/>
        <child xsi:type="archimate:Note" id="_7tmJ4A2KEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="8" y="34" width="290" height="250"/>
          <content>Status: SuccessOperation: Pay from ClientPlatform: StripeAmount: 100Currency: USDInternalId: InID-CP-1Recipiens: - ID: ID_OF_MERCHANT - Amount: 94- Fee: 0- TransactionId: ST-ID-1-------------------------------- - ID: ID_OF_BRISKLY_IN_STRIPE - Amount: 6- Fee: 5.6- TransactionId: ST-ID-1--------------------------------</content>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_uot18A2YEDqz_MblWIxtOg" targetConnections="_7qS14A2YEDqz_MblWIxtOg" archimateElement="_uoWpkA2YEDqz_MblWIxtOg">
          <bounds x="169" y="45" width="80" height="40"/>
          <sourceConnection xsi:type="archimate:Connection" id="_eTj6gA2aEDqz_MblWIxtOg" source="_uot18A2YEDqz_MblWIxtOg" target="_BefCEA2ZEDqz_MblWIxtOg" archimateRelationship="_eTbXoA2aEDqz_MblWIxtOg">
            <bendpoint startX="-17" startY="158" endX="76" endY="-188"/>
            <bendpoint startX="-17" startY="158" endX="76" endY="-188"/>
          </sourceConnection>
          <sourceConnection xsi:type="archimate:Connection" id="_e20YkA2aEDqz_MblWIxtOg" source="_uot18A2YEDqz_MblWIxtOg" target="_BAYUUA2aEDqz_MblWIxtOg" archimateRelationship="_e2oyYA2aEDqz_MblWIxtOg">
            <bendpoint startX="34" startY="158" endX="-94" endY="-188"/>
            <bendpoint startX="34" startY="158" endX="-94" endY="-188"/>
          </sourceConnection>
        </child>
      </child>
      <child xsi:type="archimate:Group" id="_yUwp4A2YEDqz_MblWIxtOg" name="Сформированые записи" textAlignment="1">
        <bounds x="510" y="813" width="450" height="400"/>
        <child xsi:type="archimate:DiagramObject" id="_BefCEA2ZEDqz_MblWIxtOg" targetConnections="_eTj6gA2aEDqz_MblWIxtOg" archimateElement="_BeSNwA2ZEDqz_MblWIxtOg">
          <bounds x="18" y="34" width="200" height="100"/>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_BAYUUA2aEDqz_MblWIxtOg" targetConnections="_e20YkA2aEDqz_MblWIxtOg" archimateElement="_BAMuIA2aEDqz_MblWIxtOg">
          <bounds x="239" y="34" width="200" height="100"/>
          <sourceConnection xsi:type="archimate:Connection" id="_dhqjgA2aEDqz_MblWIxtOg" source="_BAYUUA2aEDqz_MblWIxtOg" target="_aP-wUA2aEDqz_MblWIxtOg" archimateRelationship="_dhiAoA2aEDqz_MblWIxtOg">
            <bendpoint startY="66" endY="-65"/>
            <bendpoint startY="65" endY="-66"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_aP-wUA2aEDqz_MblWIxtOg" targetConnections="_dhqjgA2aEDqz_MblWIxtOg" archimateElement="_aPzKIA2aEDqz_MblWIxtOg">
          <bounds x="239" y="165" width="200" height="100"/>
        </child>
        <child xsi:type="archimate:Note" id="_oX8wkA2aEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="20" y="289" width="420" height="90"/>
          <content>По итогу:На учетка страйпа аккаунта магазина 94$На учетке страйпа аккаунта брискли 0.4$Коммисия страйпа сразу же снимается с той части платежа что принадлежит брискли</content>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_lrGd4g2cEDqz_MblWIxtOg" archimateElement="_lrGd4A2cEDqz_MblWIxtOg">
        <bounds x="1021" y="360" width="390" height="110"/>
        <sourceConnection xsi:type="archimate:Connection" id="_hzsU8A5AEDq7DoulV38TMA" source="_lrGd4g2cEDqz_MblWIxtOg" target="_ivQiYA2dEDqz_MblWIxtOg" archimateRelationship="_hzmOUA5AEDq7DoulV38TMA">
          <bendpoint startX="51" startY="86" endY="-50"/>
          <bendpoint startX="51" startY="85" endY="-51"/>
        </sourceConnection>
      </child>
      <child xsi:type="archimate:Group" id="_B3y9IA2dEDqz_MblWIxtOg" name="События" textAlignment="1">
        <bounds x="1015" y="486" width="400" height="300"/>
        <child xsi:type="archimate:Note" id="_Ox1KoA2dEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="6" y="35" width="300" height="180"/>
          <content>Status: SuccessOperation: PayoutPlatform: StripeAmount: 100Currency: USDInternalId: InID-ST-2Recipiens: - ID: ID_OF_BRISKLY_BANK_ACC - Amount: 100- Fee: 1- TransactionId: ST-ID-2--------------------------------</content>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_ivQiYA2dEDqz_MblWIxtOg" targetConnections="_hzsU8A5AEDq7DoulV38TMA" archimateElement="_iu4H4A2dEDqz_MblWIxtOg">
          <bounds x="212" y="45" width="80" height="40"/>
          <sourceConnection xsi:type="archimate:Connection" id="_LIa-gA2eEDqz_MblWIxtOg" source="_ivQiYA2dEDqz_MblWIxtOg" target="_riXWwA2dEDqz_MblWIxtOg" archimateRelationship="_LIM8EA2eEDqz_MblWIxtOg">
            <bendpoint startY="156" endX="52" endY="-190"/>
            <bendpoint startY="155" endX="52" endY="-191"/>
          </sourceConnection>
        </child>
      </child>
      <child xsi:type="archimate:Group" id="_lkHPoA2dEDqz_MblWIxtOg" name="Сформированые записи" textAlignment="1">
        <bounds x="1015" y="813" width="400" height="370"/>
        <child xsi:type="archimate:DiagramObject" id="_riXWwA2dEDqz_MblWIxtOg" targetConnections="_LIa-gA2eEDqz_MblWIxtOg" archimateElement="_riJUUA2dEDqz_MblWIxtOg">
          <bounds x="100" y="29" width="200" height="110"/>
          <sourceConnection xsi:type="archimate:Connection" id="_LvTYUA2eEDqz_MblWIxtOg" source="_riXWwA2dEDqz_MblWIxtOg" target="_BZh3UA2eEDqz_MblWIxtOg" archimateRelationship="_Lu-BIA2eEDqz_MblWIxtOg">
            <bendpoint startY="81" endY="-71"/>
            <bendpoint startY="81" endY="-71"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_BZh3UA2eEDqz_MblWIxtOg" targetConnections="_LvTYUA2eEDqz_MblWIxtOg" archimateElement="_BZTN0A2eEDqz_MblWIxtOg">
          <bounds x="100" y="191" width="200" height="90"/>
        </child>
        <child xsi:type="archimate:Note" id="_QMHh4A2eEDqz_MblWIxtOg" textAlignment="1">
          <bounds x="25" y="289" width="350" height="60"/>
          <content>По итогу:Получаем что в банке у брискли должно быть 99$Коммисия страйпа за перевод 1$</content>
        </child>
      </child>
    </element>
    <element xsi:type="archimate:ArchimateDiagramModel" name="Архитектура макро" id="_4eSJcA4zEDq7DoulV38TMA">
      <child xsi:type="archimate:DiagramObject" id="_sYNO0A47EDq7DoulV38TMA" archimateElement="_sYJkcA47EDq7DoulV38TMA">
        <bounds x="121" y="198" width="740" height="120"/>
        <child xsi:type="archimate:DiagramObject" id="_Hwu7oA47EDq7DoulV38TMA" targetConnections="_dv9L8A7_EDq7DoulV38TMA" archimateElement="_HwrRQA47EDq7DoulV38TMA">
          <bounds x="35" y="35" width="150" height="50"/>
          <sourceConnection xsi:type="archimate:Connection" id="_TLxmIA48EDq7DoulV38TMA" source="_Hwu7oA47EDq7DoulV38TMA" target="_KcwnkA48EDq7DoulV38TMA" archimateRelationship="_TLtUsA48EDq7DoulV38TMA">
            <bendpoint startY="85" endX="35" endY="-112"/>
            <bendpoint startY="85" endX="35" endY="-112"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_S6FHQA4-EDq7DoulV38TMA" targetConnections="_Wa7-4A4-EDq7DoulV38TMA" archimateElement="_S6A10A4-EDq7DoulV38TMA">
          <bounds x="359" y="32" width="250" height="60"/>
          <sourceConnection xsi:type="archimate:Connection" id="_mHtZwA4-EDq7DoulV38TMA" source="_S6FHQA4-EDq7DoulV38TMA" target="_eP1ekA4-EDq7DoulV38TMA" archimateRelationship="_mHld8A4-EDq7DoulV38TMA">
            <bendpoint startX="-10" startY="-78" endY="83"/>
            <bendpoint startX="-10" startY="-78" endY="83"/>
          </sourceConnection>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_z3GpUA47EDq7DoulV38TMA" targetConnections="_pbHrQA4-EDq7DoulV38TMA" textAlignment="1" archimateElement="_z3C-8A47EDq7DoulV38TMA">
        <bounds x="61" y="21" width="370" height="120"/>
        <sourceConnection xsi:type="archimate:Connection" id="_o-lgQA4-EDq7DoulV38TMA" source="_z3GpUA47EDq7DoulV38TMA" target="_eP1ekA4-EDq7DoulV38TMA" archimateRelationship="_o-ic8A4-EDq7DoulV38TMA">
          <bendpoint startX="209" startY="18" endX="-140"/>
          <bendpoint startX="210" startY="18" endX="-139"/>
        </sourceConnection>
        <sourceConnection xsi:type="archimate:Connection" id="_dv9L8A7_EDq7DoulV38TMA" source="_z3GpUA47EDq7DoulV38TMA" target="_Hwu7oA47EDq7DoulV38TMA" archimateRelationship="_dvvwkA7_EDq7DoulV38TMA">
          <bendpoint startX="-15" startY="106" endY="-71"/>
          <bendpoint startX="-15" startY="106" endY="-71"/>
        </sourceConnection>
        <child xsi:type="archimate:DiagramObject" id="_0_axsA46EDq7DoulV38TMA" archimateElement="_0-ngcA46EDq7DoulV38TMA">
          <bounds x="10" y="48" width="130" height="60"/>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_4J57QA47EDq7DoulV38TMA" archimateElement="_4J238A47EDq7DoulV38TMA">
          <bounds x="163" y="48" width="130" height="60"/>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_9ALtsA47EDq7DoulV38TMA" textAlignment="1" archimateElement="_9AB8sA47EDq7DoulV38TMA">
        <bounds x="61" y="364" width="900" height="280"/>
        <child xsi:type="archimate:DiagramObject" id="_KcwnkA48EDq7DoulV38TMA" targetConnections="_TLxmIA48EDq7DoulV38TMA" archimateElement="_Kcqg8A48EDq7DoulV38TMA">
          <bounds x="10" y="39" width="250" height="104"/>
          <sourceConnection xsi:type="archimate:Connection" id="_gHvQ0A49EDq7DoulV38TMA" source="_KcwnkA48EDq7DoulV38TMA" target="_ZfZD0A49EDq7DoulV38TMA" archimateRelationship="_gHs0kA49EDq7DoulV38TMA">
            <bendpoint startX="147" endX="-148"/>
            <bendpoint startX="148" endX="-147"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_ZfZD0A49EDq7DoulV38TMA" targetConnections="_gHvQ0A49EDq7DoulV38TMA" archimateElement="_ZfWnkA49EDq7DoulV38TMA">
          <bounds x="305" y="41" width="250" height="100"/>
          <sourceConnection xsi:type="archimate:Connection" id="_1INZ8A49EDq7DoulV38TMA" source="_ZfZD0A49EDq7DoulV38TMA" target="_n3oUsA49EDq7DoulV38TMA" archimateRelationship="_1ILkwA49EDq7DoulV38TMA">
            <bendpoint startY="61" endY="-61"/>
            <bendpoint startY="61" endY="-61"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_n3oUsA49EDq7DoulV38TMA" targetConnections="_1INZ8A49EDq7DoulV38TMA" archimateElement="_n3nGkA49EDq7DoulV38TMA">
          <bounds x="305" y="163" width="250" height="100"/>
          <sourceConnection xsi:type="archimate:Connection" id="_CQMj4A4-EDq7DoulV38TMA" source="_n3oUsA49EDq7DoulV38TMA" target="_5GgbgA49EDq7DoulV38TMA" archimateRelationship="_CQHEUA4-EDq7DoulV38TMA">
            <bendpoint startX="141" endX="-141" endY="-1"/>
            <bendpoint startX="141" endX="-141" endY="-1"/>
          </sourceConnection>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_5GgbgA49EDq7DoulV38TMA" targetConnections="_CQMj4A4-EDq7DoulV38TMA" archimateElement="_5Gd_QA49EDq7DoulV38TMA">
          <bounds x="587" y="163" width="250" height="102"/>
          <sourceConnection xsi:type="archimate:Connection" id="_Salu4A4-EDq7DoulV38TMA" source="_5GgbgA49EDq7DoulV38TMA" target="_OPrNoA4-EDq7DoulV38TMA" archimateRelationship="_SadzEA4-EDq7DoulV38TMA">
            <bendpoint startY="-67" endY="61"/>
            <bendpoint startY="-67" endY="61"/>
          </sourceConnection>
          <child xsi:type="archimate:DiagramObject" id="_7JMsAA49EDq7DoulV38TMA" archimateElement="_7JKPwA49EDq7DoulV38TMA">
            <bounds x="60" y="32" width="130" height="60"/>
          </child>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_OPrNoA4-EDq7DoulV38TMA" targetConnections="_Salu4A4-EDq7DoulV38TMA" archimateElement="_OPlHAA4-EDq7DoulV38TMA">
          <bounds x="587" y="41" width="250" height="90"/>
          <sourceConnection xsi:type="archimate:Connection" id="_Wa7-4A4-EDq7DoulV38TMA" source="_OPrNoA4-EDq7DoulV38TMA" target="_S6FHQA4-EDq7DoulV38TMA" archimateRelationship="_Wa4UgA4-EDq7DoulV38TMA">
            <bendpoint startX="-84" startY="-103" endX="84" endY="87"/>
            <bendpoint startX="-84" startY="-102" endX="84" endY="88"/>
          </sourceConnection>
        </child>
      </child>
      <child xsi:type="archimate:Note" id="_hclZUA48EDq7DoulV38TMA" textAlignment="1">
        <bounds x="718" y="64" width="450" height="70"/>
        <content>Необходимо обеспечить идемпотентность для обработчика событийНа каждое событие должно приходить &quot;подтверждение&quot; обработкиСобытие на которое не получено подтверждение от необходимо сервиса должно прокинуться еще раз.</content>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_eP1ekA4-EDq7DoulV38TMA" targetConnections="_mHtZwA4-EDq7DoulV38TMA _o-lgQA4-EDq7DoulV38TMA" archimateElement="_ePv_AA4-EDq7DoulV38TMA">
        <bounds x="480" y="64" width="230" height="70"/>
        <sourceConnection xsi:type="archimate:Connection" id="_pbHrQA4-EDq7DoulV38TMA" source="_eP1ekA4-EDq7DoulV38TMA" target="_z3GpUA47EDq7DoulV38TMA" archimateRelationship="_pbFPAA4-EDq7DoulV38TMA">
          <bendpoint startX="-139" endX="210" endY="18"/>
          <bendpoint startX="-140" endX="209" endY="18"/>
        </sourceConnection>
      </child>
    </element>
    <element xsi:type="archimate:ArchimateDiagramModel" name="archimate-diagram" id="_TlN2oCLREDqw2IzuZUOYvg">
      <child xsi:type="archimate:DiagramObject" id="_oF4VgCXKEDqeZsBuoz9wnQ" targetConnections="_1jAdcCXUEDqeZsBuoz9wnQ" archimateElement="_oFJ8wCXKEDqeZsBuoz9wnQ">
        <bounds x="43" y="32" width="1080" height="120"/>
        <sourceConnection xsi:type="archimate:Connection" id="_GexUoCXNEDqeZsBuoz9wnQ" source="_oF4VgCXKEDqeZsBuoz9wnQ" target="_WzvNYCXMEDqeZsBuoz9wnQ" archimateRelationship="_GehdACXNEDqeZsBuoz9wnQ">
          <bendpoint startX="-317" startY="75" endX="2" endY="-88"/>
          <bendpoint startX="-317" startY="74" endX="2" endY="-89"/>
        </sourceConnection>
        <child xsi:type="archimate:DiagramObject" id="_qI8ZcCXKEDqeZsBuoz9wnQ" archimateElement="_qI5WICXKEDqeZsBuoz9wnQ">
          <bounds x="15" y="42" width="130" height="60"/>
        </child>
        <child xsi:type="archimate:Note" id="_hLbPYCXLEDqeZsBuoz9wnQ" textAlignment="1">
          <bounds x="158" y="42" width="130" height="60"/>
          <content>В шину попадают все события с плтаженых сервисов, по разным поставщикам</content>
        </child>
        <child xsi:type="archimate:Note" id="_g871gCXNEDqeZsBuoz9wnQ" textAlignment="1">
          <bounds x="296" y="42" width="130" height="60"/>
          <content>Используется глобальная шина событий компании</content>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_WzvNYCXMEDqeZsBuoz9wnQ" targetConnections="_GexUoCXNEDqeZsBuoz9wnQ" archimateElement="_Wzk1UCXMEDqeZsBuoz9wnQ">
        <bounds x="39" y="181" width="450" height="148"/>
        <child xsi:type="archimate:Note" id="_ljowUCXMEDqeZsBuoz9wnQ" textAlignment="1">
          <bounds x="19" y="44" width="290" height="90"/>
          <content>Подписчик лишь валидирует общую структуру события. Убеждается что это деств. платежное событие.Далее создает задачу в очереди первичной обработки события.</content>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_ltR_ECXNEDqeZsBuoz9wnQ" archimateElement="_ltJcMCXNEDqeZsBuoz9wnQ">
        <bounds x="40" y="350" width="450" height="280"/>
        <child xsi:type="archimate:DiagramObject" id="_tOmbcCXNEDqeZsBuoz9wnQ" archimateElement="_tOaOMCXNEDqeZsBuoz9wnQ">
          <bounds x="15" y="39" width="420" height="230"/>
          <child xsi:type="archimate:DiagramObject" id="_Bjtd8CXPEDqeZsBuoz9wnQ" targetConnections="_yzShICXPEDqeZsBuoz9wnQ" archimateElement="_BjgCkCXPEDqeZsBuoz9wnQ">
            <bounds x="208" y="35" width="130" height="60"/>
            <sourceConnection xsi:type="archimate:Connection" id="_g0tbsCXPEDqeZsBuoz9wnQ" source="_Bjtd8CXPEDqeZsBuoz9wnQ" target="_Gci1ICXPEDqeZsBuoz9wnQ" archimateRelationship="_g0gAUCXPEDqeZsBuoz9wnQ">
              <bendpoint startX="164" endX="-250"/>
              <bendpoint startX="165" endX="-249"/>
            </sourceConnection>
            <sourceConnection xsi:type="archimate:Connection" id="_oCBW8CXPEDqeZsBuoz9wnQ" source="_Bjtd8CXPEDqeZsBuoz9wnQ" target="_jW3PYCXPEDqeZsBuoz9wnQ" archimateRelationship="_oB2X0CXPEDqeZsBuoz9wnQ">
              <bendpoint startY="53" endX="-25" endY="-57"/>
              <bendpoint startY="52" endX="-25" endY="-58"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_jW3PYCXPEDqeZsBuoz9wnQ" targetConnections="_oCBW8CXPEDqeZsBuoz9wnQ" archimateElement="_jWs3UCXPEDqeZsBuoz9wnQ">
            <bounds x="208" y="140" width="180" height="70"/>
            <sourceConnection xsi:type="archimate:Connection" id="_tt3ioCXTEDqeZsBuoz9wnQ" source="_jW3PYCXPEDqeZsBuoz9wnQ" target="_HbLq0CXTEDqeZsBuoz9wnQ" archimateRelationship="_ttu_wCXTEDqeZsBuoz9wnQ">
              <bendpoint startY="61" endX="-52" endY="-375"/>
              <bendpoint startY="60" endX="-52" endY="-376"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:Note" id="_pkXTcCXPEDqeZsBuoz9wnQ" textAlignment="1">
            <bounds x="15" y="35" width="170" height="80"/>
            <content>Если блокировка в сервисе обеспечения индепотетности не прошла то прерываем обработку события</content>
          </child>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_Gci1ICXPEDqeZsBuoz9wnQ" targetConnections="_g0tbsCXPEDqeZsBuoz9wnQ _FTaQkCXUEDqeZsBuoz9wnQ _nfuv8CXUEDqeZsBuoz9wnQ" archimateElement="_GcYdECXPEDqeZsBuoz9wnQ">
        <bounds x="592" y="374" width="300" height="160"/>
        <sourceConnection xsi:type="archimate:Connection" id="_yzShICXPEDqeZsBuoz9wnQ" source="_Gci1ICXPEDqeZsBuoz9wnQ" target="_Bjtd8CXPEDqeZsBuoz9wnQ" archimateRelationship="_yzKlUCXPEDqeZsBuoz9wnQ">
          <bendpoint startX="-249" endX="165"/>
          <bendpoint startX="-250" endX="164"/>
        </sourceConnection>
        <child xsi:type="archimate:Note" id="_u8fZQCXQEDqeZsBuoz9wnQ" textAlignment="1">
          <bounds x="17" y="39" width="230" height="90"/>
          <content>Использовать лучше разработаную нами либу, которая реализует блокировку используя редис</content>
        </child>
      </child>
      <child xsi:type="archimate:DiagramObject" id="_HbLq0CXTEDqeZsBuoz9wnQ" targetConnections="_tt3ioCXTEDqeZsBuoz9wnQ" archimateElement="_Ha3hwCXTEDqeZsBuoz9wnQ">
        <bounds x="40" y="650" width="730" height="700"/>
        <child xsi:type="archimate:Note" id="_am2OcCXTEDqeZsBuoz9wnQ" textAlignment="1">
          <bounds x="15" y="32" width="310" height="60"/>
          <content>Для разных поставщиков (СР, Тинькоф и т.д.) разные очереди и соотвественно обработчики</content>
        </child>
        <child xsi:type="archimate:DiagramObject" id="_8-AE0CXTEDqeZsBuoz9wnQ" targetConnections="id-16d5c5a8bbf848e5836466db4d3b66af" archimateElement="_891FsCXTEDqeZsBuoz9wnQ">
          <bounds x="60" y="100" width="580" height="590"/>
          <child xsi:type="archimate:DiagramObject" id="_BifjsCXUEDqeZsBuoz9wnQ" archimateElement="_BiQ6MCXUEDqeZsBuoz9wnQ">
            <bounds x="225" y="40" width="130" height="60"/>
            <sourceConnection xsi:type="archimate:Connection" id="_FTaQkCXUEDqeZsBuoz9wnQ" source="_BifjsCXUEDqeZsBuoz9wnQ" target="_Gci1ICXPEDqeZsBuoz9wnQ" archimateRelationship="_FTRtsCXUEDqeZsBuoz9wnQ">
              <bendpoint startX="367" endX="15" endY="366"/>
              <bendpoint startX="367" startY="-266" endX="15" endY="100"/>
            </sourceConnection>
            <sourceConnection xsi:type="archimate:Connection" id="_RqErQCXUEDqeZsBuoz9wnQ" source="_BifjsCXUEDqeZsBuoz9wnQ" target="_NWJ_ACXUEDqeZsBuoz9wnQ" archimateRelationship="_Rpy-cCXUEDqeZsBuoz9wnQ">
              <bendpoint startY="46" endY="-46"/>
              <bendpoint startY="46" endY="-46"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_NWJ_ACXUEDqeZsBuoz9wnQ" targetConnections="_RqErQCXUEDqeZsBuoz9wnQ" archimateElement="_NV2dACXUEDqeZsBuoz9wnQ">
            <bounds x="225" y="132" width="130" height="60"/>
            <sourceConnection xsi:type="archimate:Connection" id="_ZRB1kCXUEDqeZsBuoz9wnQ" source="_NWJ_ACXUEDqeZsBuoz9wnQ" target="_U1jv0CXUEDqeZsBuoz9wnQ" archimateRelationship="_ZQ22cCXUEDqeZsBuoz9wnQ">
              <bendpoint startY="39" endX="10" endY="-39"/>
              <bendpoint startY="39" endX="10" endY="-39"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_U1jv0CXUEDqeZsBuoz9wnQ" targetConnections="_ZRB1kCXUEDqeZsBuoz9wnQ" archimateElement="_U1Rb8CXUEDqeZsBuoz9wnQ">
            <bounds x="30" y="210" width="500" height="60"/>
            <sourceConnection xsi:type="archimate:Connection" id="_m1ZZgCXUEDqeZsBuoz9wnQ" source="_U1jv0CXUEDqeZsBuoz9wnQ" target="_cGRkYCXUEDqeZsBuoz9wnQ" archimateRelationship="_m1OaYCXUEDqeZsBuoz9wnQ">
              <bendpoint startX="10" startY="40" endY="-45"/>
              <bendpoint startX="10" startY="40" endY="-45"/>
            </sourceConnection>
            <sourceConnection xsi:type="archimate:Connection" id="id-16d5c5a8bbf848e5836466db4d3b66af" source="_U1jv0CXUEDqeZsBuoz9wnQ" target="_8-AE0CXTEDqeZsBuoz9wnQ" archimateRelationship="_lvao4CXUEDqeZsBuoz9wnQ"/>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_cGRkYCXUEDqeZsBuoz9wnQ" targetConnections="_m1ZZgCXUEDqeZsBuoz9wnQ" archimateElement="_cF6YACXUEDqeZsBuoz9wnQ">
            <bounds x="140" y="290" width="300" height="70"/>
            <sourceConnection xsi:type="archimate:Connection" id="_lVBL4CXUEDqeZsBuoz9wnQ" source="_cGRkYCXUEDqeZsBuoz9wnQ" target="_iKIkQCXUEDqeZsBuoz9wnQ" archimateRelationship="_lUuQ8CXUEDqeZsBuoz9wnQ">
              <bendpoint startY="45" endY="-40"/>
              <bendpoint startY="45" endY="-40"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_iKIkQCXUEDqeZsBuoz9wnQ" targetConnections="_lVBL4CXUEDqeZsBuoz9wnQ" archimateElement="_iJ7I4CXUEDqeZsBuoz9wnQ">
            <bounds x="140" y="380" width="300" height="60"/>
            <sourceConnection xsi:type="archimate:Connection" id="_nfuv8CXUEDqeZsBuoz9wnQ" source="_iKIkQCXUEDqeZsBuoz9wnQ" target="_Gci1ICXPEDqeZsBuoz9wnQ" archimateRelationship="_nfkX4CXUEDqeZsBuoz9wnQ">
              <bendpoint startX="406" endX="54" endY="706"/>
              <bendpoint startX="406" startY="-606" endX="54" endY="100"/>
            </sourceConnection>
            <sourceConnection xsi:type="archimate:Connection" id="_vNmakCXUEDqeZsBuoz9wnQ" source="_iKIkQCXUEDqeZsBuoz9wnQ" target="_s7cKsCXUEDqeZsBuoz9wnQ" archimateRelationship="_vNY_MCXUEDqeZsBuoz9wnQ">
              <bendpoint startY="40" endX="-50" endY="-70"/>
              <bendpoint startY="40" endX="-50" endY="-70"/>
            </sourceConnection>
          </child>
          <child xsi:type="archimate:DiagramObject" id="_s7cKsCXUEDqeZsBuoz9wnQ" targetConnections="_vNmakCXUEDqeZsBuoz9wnQ" archimateElement="_s7ZucCXUEDqeZsBuoz9wnQ">
            <bounds x="140" y="460" width="400" height="120"/>
            <sourceConnection xsi:type="archimate:Connection" id="_1jAdcCXUEDqeZsBuoz9wnQ" source="_s7cKsCXUEDqeZsBuoz9wnQ" target="_oF4VgCXKEDqeZsBuoz9wnQ" archimateRelationship="_1i9aICXUEDqeZsBuoz9wnQ">
              <bendpoint startX="600" endX="457" endY="1178"/>
              <bendpoint startX="600" startY="-589" endX="457" endY="589"/>
            </sourceConnection>
            <child xsi:type="archimate:DiagramObject" id="_wC31sCXUEDqeZsBuoz9wnQ" archimateElement="_wCmv8CXUEDqeZsBuoz9wnQ">
              <bounds x="50" y="40" width="190" height="60"/>
            </child>
            <child xsi:type="archimate:Note" id="_4TlusCXUEDqeZsBuoz9wnQ" textAlignment="1">
              <bounds x="260" y="20" width="130" height="90"/>
              <content>Необходимо для дальнейшего функционала по контролю доставки всех платежных событий</content>
            </child>
          </child>
        </child>
      </child>
    </element>
  </folder>
</archimate:model>
